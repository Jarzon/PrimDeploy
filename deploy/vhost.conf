<virtualhost *:80>
    DirectoryIndex index.php

    ServerAdmin j@masterj.net
    ServerName PROJECT.net
    ServerAlias www.PROJECT.net

    DocumentRoot /var/www/PROJECT/htdocs/public/
    <Directory /var/www/PROJECT/htdocs/public/>
        AllowOverride none
        RewriteEngine On

        #force www and https
        RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
        RewriteCond %{HTTPS}s ^on(s)|
        RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

		# Prevent people from looking directly into folders
		Options -Indexes

		# If the following conditions are true, then rewrite the URL:
        # If the requested filename is not a directory,
        RewriteCond %{REQUEST_FILENAME} !-d
        # and if the requested filename is not a regular file that exists,
        RewriteCond %{REQUEST_FILENAME} !-f
        # and if the requested filename is not a symbolic link,
        RewriteCond %{REQUEST_FILENAME} !-l

        RewriteRule ^(.+)$ index.php [L]

        # Caching
        <IfModule mod_expires.c>
            ExpiresActive On
            ExpiresDefault "access plus 1 seconds"
            ExpiresByType image/gif "access plus 7 days"
            ExpiresByType image/jpeg "access plus 7 days"
            ExpiresByType image/png "access plus 7 days"
            ExpiresByType text/css "access plus 7 days"
            ExpiresByType text/javascript "access plus 7 days"
            ExpiresByType application/javascript "access plus 7 days"
            ExpiresByType text/xml "access plus 12 hours"
        </IfModule>

        Order Allow,Deny
        Allow from all
    </Directory>

    # Custom log file locations
    LogLevel warn
    ErrorLog  /var/www/PROJECT/logs/error.log
    CustomLog /var/www/PROJECT/logs/access.log combined
</virtualhost>